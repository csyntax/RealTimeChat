<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />

        <title>SignalR Chat</title>
    </head>
    <body>
        <form>
            <input type="text" id="message"/>
            <input type="hidden" id="displayname" />
            <input type="button" id="sendmessage" value="Send" />
        </form>
            
        <ul id="discussion"></ul>
    
        <script src="/Scripts/jquery-2.1.4.min.js"></script>
        <script src="/Scripts/jquery.signalR-2.2.0.min.js"></script>
        <script src="/SignalR/Hubs"></script>
    
        <script>
            $(function () {
                var chat = $.connection.chatHub;
        
                chat.client.broadcastMessage = function (name, message) {
                    var encodedName = $("<div />").text(name).html();
                    var encodedMsg = $("<div />").text(message).html();

                    $("#discussion").append("<li><strong>" + encodedName + "</strong>:&nbsp;&nbsp;" + encodedMsg + "</li>");
                };
            
                $("#displayname").val(prompt("Enter your name:", ""));
                $("#message").focus();
           
                $.connection.hub.start().done(function () {
                    $("#sendmessage").click(function () {
                        chat.server.send($("#displayname").val(), $("#message").val());
          
                        $("#message").val("").focus();
                    });
                });
            });
        </script>
    </body>
</html>